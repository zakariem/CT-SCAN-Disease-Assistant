# CT-SCAN Disease Assistant

A comprehensive AI-powered medical imaging analysis tool that provides automated CT scan diagnosis with explainable AI visualizations and detailed reporting.

## 🏥 Overview

The CT-SCAN Disease Assistant is a full-stack web application that combines deep learning models with explainable AI techniques to assist radiologists in analyzing CT scan images. The system provides:

- **Automated Image Classification**: Two-stage classification system with gatekeeper and diagnostic models
- **Explainable AI Visualizations**: Grad-CAM, Saliency Maps, and Guided Backpropagation
- **AI-Generated Reports**: Comprehensive analysis reports powered by Google's Gemini AI
- **Modern Web Interface**: Clean, responsive React frontend with real-time analysis

## 🎯 Features

### Core Functionality
- **Two-Stage Analysis Pipeline**:
  - **Gatekeeper Model**: Validates input as CT scan vs X-ray vs Unknown
  - **Diagnostic Model**: Classifies medical conditions across multiple organ systems

### Supported Diagnoses
- **Colon**: Cancer, Non-Cancer
- **Kidney**: Cyst, Normal, Stone, Tumor
- **Liver**: Hepatic Steatosis, Healthy

### Visualization Tools
- **Original Image**: Preprocessed input visualization
- **Probability Chart**: Class probability distribution
- **Grad-CAM**: Gradient-weighted Class Activation Mapping
- **Saliency Map**: Pixel-level importance visualization
- **Guided Backpropagation**: Fine-grained feature visualization

### AI-Powered Reporting
- Structured medical reports generated by Gemini AI
- Probability interpretation and confidence analysis
- Visualization explanations for radiologists
- Professional medical disclaimers

## 🏗️ Architecture

### Backend (FastAPI + PyTorch)
- **Framework**: FastAPI with async support
- **Models**: 
  - Gatekeeper: MobileNet V3 Large
  - Diagnostic: EfficientNet-B0
- **AI Integration**: Google Gemini AI for report generation
- **Visualization**: Custom PyTorch implementations of explainable AI techniques

### Frontend (React + Vite)
- **Framework**: React 19 with Vite build tool
- **Styling**: Custom CSS with modern design system
- **State Management**: React hooks for application state
- **File Handling**: Drag-and-drop image upload with preview

## 🚀 Quick Start

### Prerequisites
- Python 3.8+
- Node.js 16+
- CUDA-compatible GPU (recommended)
- Google AI API key

### Backend Setup

1. **Navigate to backend directory**:
   ```bash
   cd backend
   ```

2. **Create virtual environment**:
   ```bash
   python -m venv .venv
   .venv\Scripts\activate  # Windows
   # source .venv/bin/activate  # Linux/Mac
   ```

3. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

4. **Environment configuration**:
   Create `.env` file in backend directory:
   ```env
   GOOGLE_API_KEY=your_gemini_api_key_here
   ```

5. **Start the server**:
   ```bash
   python main.py
   ```
   Server will run on `http://localhost:8000`

### Frontend Setup

1. **Navigate to frontend directory**:
   ```bash
   cd frontend
   ```

2. **Install dependencies**:
   ```bash
   npm install
   ```

3. **Environment configuration**:
   Create `.env` file in frontend directory:
   ```env
   VITE_API_BASE_URL=http://localhost:8000
   ```

4. **Start development server**:
   ```bash
   npm run dev
   ```
   Application will run on `http://localhost:5173`

## 📖 Usage

1. **Upload Image**: Click or drag a CT scan image (PNG, JPEG, JPG, BMP) to the upload area
2. **Preview**: Review the uploaded image in the preview panel
3. **Analyze**: Click "Analyze Image" to start the AI analysis
4. **Review Results**: Examine the comprehensive analysis including:
   - Input validation status
   - Diagnostic prediction with confidence
   - Interactive visualizations
   - AI-generated medical report

## 🔧 API Documentation

### Endpoints

#### `POST /analyze`
Analyzes uploaded CT scan image and returns comprehensive results.

**Request**:
- Content-Type: `multipart/form-data`
- Body: Image file (PNG, JPEG, JPG, BMP)

**Response**:
```json
{
  "gatekeeper_prediction": "CT_Scan",
  "diagnostic_prediction": "Kidney_Normal",
  "probabilities": {
    "Colon_Cancer": "0.0123",
    "Kidney_Normal": "0.8765",
    ...
  },
  "visualizations": {
    "original": "base64_encoded_image",
    "probability_chart": "base64_encoded_chart",
    "grad_cam": "base64_encoded_heatmap",
    "saliency_map": "base64_encoded_heatmap",
    "guided_backprop": "base64_encoded_visualization"
  },
  "explanation": "AI-generated medical report..."
}
```

## 🛠️ Development

### Project Structure
```
CT-SCAN-Disease-Assistant/
├── backend/
│   ├── main.py              # FastAPI application
│   ├── utils.py             # ML utilities and visualization tools
│   ├── requirements.txt     # Python dependencies
│   ├── models/              # Trained model files
│   └── .env                 # Environment variables
└── frontend/
    ├── src/
    │   ├── App.jsx          # Main React component
    │   ├── App.css          # Application styles
    │   └── main.jsx         # React entry point
    ├── package.json         # Node.js dependencies
    └── .env                 # Environment variables
```

### Key Technologies
- **Backend**: FastAPI, PyTorch, OpenCV, Matplotlib, Google Generative AI
- **Frontend**: React, Vite, CSS3
- **ML Models**: EfficientNet-B0, MobileNet V3
- **Visualization**: Grad-CAM, Saliency Maps, Guided Backpropagation

## 🔒 Security & Compliance

- **Data Privacy**: Images are processed in-memory and not stored
- **API Security**: CORS configuration for secure frontend communication
- **Medical Disclaimer**: All results include appropriate medical disclaimers
- **Environment Variables**: Sensitive data managed through environment files

## 📝 License

This project is intended for educational and research purposes. Please ensure compliance with medical device regulations and obtain appropriate approvals before clinical use.

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## 📞 Support

For questions, issues, or contributions, please open an issue in the repository or contact the development team.

---

**⚠️ Medical Disclaimer**: This tool is designed for educational and research purposes only. It is not intended for clinical diagnosis or treatment decisions. Always consult qualified medical professionals for medical advice.